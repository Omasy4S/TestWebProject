@using TestWebProject.HelpClasses
@model List<User>
@{
    ViewData["Title"] = "PrintValueCollection";

    // Функция для генерации цвета на основе имени
    string GetColorFromName(string name)
    {
        if (string.IsNullOrEmpty(name)) return "#4b6cb7";

        var colors = new[] { "#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#9966FF", "#FF9F40", "#4b6cb7", "#182848" };
        var index = Math.Abs(name.GetHashCode()) % colors.Length;
        return colors[index];
    }
}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-10 col-lg-8">
            <div class="card shadow-lg border-0 rounded-4">
                <div class="card-header bg-gradient-primary text-white py-4 rounded-top-4">
                    <h3 class="card-title mb-0 text-center">
                        <i class="fas fa-users me-2"></i>Список пользователей
                    </h3>
                    <p class="text-center mb-0 mt-2 opacity-75">Информация о всех пользователях системы</p>
                </div>
                <div class="card-body p-4">
                    @if (Model.Any())
                    {
                        <div class="row row-cols-1 row-cols-md-2 g-4">
                            @foreach (var user in Model)
                            {
                                var initials = user.Name.Length > 0 ? user.Name[0].ToString() : "?";
                                var bgColor = GetColorFromName(user.Name);

                                <div class="col">
                                    <div class="card user-card h-100 border-0 shadow-sm">
                                        <div class="card-body text-center p-4">
                                            <div class="user-avatar mb-3 mx-auto" style="background-color: @bgColor">
                                                <span class="avatar-text">@initials</span>
                                            </div>
                                            <h5 class="card-title fw-bold">@user.Name</h5>
                                            <div class="user-details">
                                                <div class="detail-item">
                                                    <i class="fas fa-birthday-cake me-2 text-primary"></i>
                                                    <span>Возраст: <strong>@user.Age</strong></span>
                                                </div>
                                                @if (user.Age >= 18)
                                                {
                                                    <span class="badge bg-success mt-2">Совершеннолетний</span>
                                                }
                                                else
                                                {
                                                    <span class="badge bg-warning mt-2">Несовершеннолетний</span>
                                                }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    }
                    else
                    {
                        <div class="text-center py-5">
                            <i class="fas fa-user-slash fa-4x text-muted mb-3"></i>
                            <h4 class="text-muted">Пользователи не найдены</h4>
                            <p class="text-muted">В системе пока нет зарегистрированных пользователей</p>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Стили для улучшения внешнего вида -->
<style>
    body {
        background: linear-gradient(135deg, #f5f7fa 0%, #e4efe9 100%);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
    }

    .container {
        flex: 1;
    }

    .card {
        border: none;
        transition: transform 0.3s ease;
    }

        .card:hover {
            transform: translateY(-5px);
        }

    .bg-gradient-primary {
        background: linear-gradient(45deg, #4b6cb7, #182848) !important;
    }

    .user-card {
        transition: all 0.3s ease;
        border-radius: 12px;
    }

        .user-card:hover {
            box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important;
        }

    .user-avatar {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 15px;
    }

    .avatar-text {
        color: white;
        font-weight: bold;
        font-size: 24px;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    }

    .user-details {
        margin-top: 15px;
    }

    .detail-item {
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .badge {
        font-size: 0.8rem;
        padding: 5px 10px;
        border-radius: 20px;
    }
</style>

<!-- Подключение Font Awesome -->
@section Scripts {
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
}